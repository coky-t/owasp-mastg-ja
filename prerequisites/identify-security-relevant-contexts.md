## コード内のセキュリティ関連コンテキストを特定する (Identify Security-Relevant Contexts in Code)

モバイルアプリケーションを開発する場合、コードベース内のセキュリティ関連コンテキストを正確に特定して処理することが重要です。これらのコンテキストは、一般的に、認証、暗号化、認可などの操作に関連し、セキュリティ攻撃の標的になることがよくあります。これらの領域で暗号機能の実装を誤ると、重大なセキュリティ脆弱性につながる可能性があります。

セキュリティ関連コンテキストを適切に区別することは、セキュリティテスト時の誤検知を最小限に抑えるのに役立ちます。誤検知は実際の問題から注意をそらし、貴重なリソースを浪費する可能性があります。よくあるシナリオをいくつか示します。

- **乱数生成**: エントロピーが不十分な乱数生成器を使用すると、予測可能な値が攻撃者に悪用される可能性があるため、認証や暗号鍵生成などのコンテキストで深刻なセキュリティ上の欠陥となる可能性があります。但し、乱数の用途すべてがセキュリティ上重要なわけではありません。たとえば、ゲームでアイテムをシャッフルするなどのセキュリティ以外の目的であまり堅牢でない生成器を使用することは、一般的に許容されます。

- **ハッシュ化**: ハッシュ化は、パスワードを保存したり、データの完全性を確保するために、セキュリティでよく使用されます。しかし、解析用のデバイスの画面解像度など、機密性のない値をハッシュ化することは、セキュリティ上の問題ではありません。

- **暗号化とエンコーディング**: よくある誤解は、エンコーディング (Base64 など) と暗号化を混同することです。Base64 エンコーディングは簡単に元に戻せるため、機密データを保護する安全な方法ではありません。データが実際に暗号化を必要とする場合 (機密性のため) と、互換性やフォーマット上の理由でエンコードされる場合 (バイナリデータをテキスト形式にエンコードして送信するなど) を見分けることが重要です。エンコーディングをセキュリティ対策として誤解すると、機密データに対する実際の暗号化の必要性を見落とすことになりかねません。

- **API トークンの保存**: API トークンやキーをアプリのコード内や安全でない場所 (Android の SharedPreferences や iOS の UserDefaults など) にプレーンテキストで保存することは、よくあるセキュリティ上の間違いです。但し、トークンが機密性のない、読み取り専用のパブリック API 用である場合、これはセキュリティリスクではないかもしれません。これとは対照的に、機密性の高い、あるいは書き込みアクセス API のトークンを保存する場合、不適切な保存は重大なセキュリティ上の懸念となります。
